% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/species_threshold.R
\name{species_threshold}
\alias{species_threshold}
\title{Calculate confidence threshold for a single species}
\usage{
species_threshold(
  df,
  valid_col,
  conf_col,
  p = 0.95,
  backtransform = TRUE,
  sensitivity = 1,
  threshold_only = FALSE,
  plot = FALSE,
  plot_logit = FALSE
)
}
\arguments{
\item{df}{A data frame containing species detection data for a single species}

\item{valid_col}{Character string specifying the column name containing binary validation data (0/1, TRUE/FALSE)}

\item{conf_col}{Character string specifying the column name containing confidence scores}

\item{p}{Numeric value between 0 and 1 specifying the probability threshold (default: 0.95)}

\item{backtransform}{Logical. If TRUE, uses logit-transformed scores with sensitivity parameter (default: TRUE)}

\item{sensitivity}{Numeric value for sensitivity parameter used in logit transformation (default: 1.0)}

\item{threshold_only}{Logical. If TRUE, returns only the threshold value. If FALSE, returns complete results (default: FALSE)}

\item{plot}{Logical. If TRUE, creates a base R plot (default: FALSE)}

\item{plot_logit}{Logical. If TRUE and backtransform=TRUE, plots on logit scale instead of original confidence scale (default: FALSE)}
}
\value{
If threshold_only = TRUE, returns a numeric threshold value.
If threshold_only = FALSE, returns a list containing:
\itemize{
\item threshold: numeric threshold value
\item logit_threshold: threshold on the logit scale
\item model: fitted glm model object
\item predictions: data frame with predictions and confidence intervals
\item parameters: list of function parameters used
}
}
\description{
This function fits a logistic regression model to calculate confidence threshold
for a single species. It returns either just the threshold or complete model
results with predictions.
}
\examples{
# Example with single species data
df_single <- data.frame(
  is_valid = rbinom(100, 1, 0.7),
  confidence_score = runif(100, 0, 1)
)

# Get threshold only (non-transformed)
threshold_only <- species_threshold(df_single, "is_valid", "confidence_score",
                                          backtransform = FALSE, threshold_only = TRUE)

# Get complete results with logit transformation and plot on logit scale
full_results <- species_threshold(df_single, "is_valid", "confidence_score",
                                        backtransform = TRUE, sensitivity = 1.0,
                                        plot = TRUE, plot_logit = TRUE)

}
