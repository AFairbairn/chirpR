% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/species_threshold.R
\name{species_threshold}
\alias{species_threshold}
\title{Calculate confidence thresholds}
\usage{
species_threshold(
  df,
  species_col,
  valid_col,
  conf_col,
  p = 0.95,
  backtransform = TRUE,
  sensitivity = 1,
  threshold_only = FALSE,
  plot = FALSE
)
}
\arguments{
\item{df}{A data frame containing species detection data}

\item{species_col}{Character string specifying the column name containing species names}

\item{valid_col}{Character string specifying the column name containing binary validation data (0/1, TRUE/FALSE)}

\item{conf_col}{Character string specifying the column name containing confidence scores}

\item{p}{Numeric value between 0 and 1 specifying the probability threshold (default: 0.95)}

\item{backtransform}{Logical. If TRUE, uses logit-transformed scores with sensitivity parameter (default: TRUE)}

\item{sensitivity}{Numeric value for sensitivity parameter used in logit transformation (default: 1.0)}

\item{threshold_only}{Logical. If TRUE, returns only species and thresholds. If FALSE, returns complete results (default: FALSE)}

\item{plot}{Logical. If TRUE, creates base R plots for each species (default: FALSE)}
}
\value{
If threshold_only = TRUE, returns a data frame with species and thresholds.
If threshold_only = FALSE, returns a list containing:
\itemize{
\item thresholds: data frame with species and calculated thresholds
\item models: list of fitted glm models for each species (contains raw data)
\item predictions: data frame with predictions and confidence intervals for each species
}
}
\description{
This function fits logistic regression models to calculate confidence thresholds
for each species validated. It can handle single or multiple species and
returns either just thresholds or complete model results with predictions.
}
\examples{
# Example with single species
df_single <- data.frame(
  species = rep("Species_A", 100),
  is_valid = rbinom(100, 1, 0.7),
  confidence_score = runif(100, 0, 1)
)

# Get thresholds only (non-transformed)
thresholds_only <- species_threshold(df_single, "species", "is_valid", "confidence_score",
                                     backtransform = FALSE, threshold_only = TRUE)

# Get complete results with logit transformation and plots
full_results <- species_threshold(df_single, "species", "is_valid", "confidence_score",
                                  backtransform = TRUE, sensitivity = 1.0, plot = TRUE)

}
