% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vocal_activity.R
\name{vocal_activity}
\alias{vocal_activity}
\title{Calculate vocal activity rates (VAR) from bird detection data}
\usage{
vocal_activity(
  df,
  method = "interval_deduplication",
  interval_unit = "minute",
  time_col = "time",
  date_col = "date",
  species_col = "scientific_name",
  site_col = NULL,
  recording_days_col = NULL,
  time_format = NULL,
  return_by_site = FALSE
)
}
\arguments{
\item{df}{A dataframe containing bird detection data.}

\item{method}{Character string specifying VAR calculation method:
\itemize{
\item "interval_deduplication" (default): Removes duplicate detections within each time interval,
then calculates detections per recording period
\item "total_detections": Uses all detections divided by total recording time
\item "detections_per_day": Calculates average detections per day
}}

\item{interval_unit}{Character string for time interval grouping. Options: "minute", "15 minutes",
"hour", "day". Default is "minute".}

\item{time_col}{Character string specifying the column name containing detection time.
This should be the actual time when the detection occurred (not start time + offset).}

\item{date_col}{Character string specifying the date column name (if separate from time_col).}

\item{species_col}{Character string specifying the species column name. Default is "scientific_name".}

\item{site_col}{Character string specifying the site column name (optional).
If provided, results will include both overall and by-site summaries.}

\item{recording_days_col}{Character string specifying column with total recording days (optional).}

\item{time_format}{Character string specifying time format if time_col needs parsing.
Common formats: "\%H:\%M:\%S", "\%H\%M\%S", "\%Y-\%m-\%d \%H:\%M:\%S".}

\item{return_by_site}{Logical. If TRUE and site_col is provided, return results by site
in addition to overall species results. Default is FALSE.}
}
\value{
If return_by_site is FALSE or site_col is NULL: A dataframe with VAR by species.
If return_by_site is TRUE and site_col is provided: A list with two elements:
\itemize{
\item by_species: VAR summarized across all sites per species
\item by_site: VAR calculated separately for each site-species combination
}
}
\description{
This function calculates vocal activity rates using different methods and time intervals.
VAR represents the rate of vocal detections per unit time, calculated per species.
If site information is provided, results can be returned both by species overall
and by species per site.
}
\examples{
\dontrun{
# Basic usage - species-level VAR only
var_result <- vocal_activity(df, species_col = "scientificName")

# With 15-minute intervals (matching your original approach)
var_result <- vocal_activity(df,
                                      method = "interval_deduplication",
                                      interval_unit = "15 minutes",
                                      time_col = "detection_time",  # Pre-calculated time
                                      species_col = "scientific_name",
                                      site_col = "site",
                                      recording_days_col = "days_recorded",
                                      return_by_site = TRUE)

# Access results
overall_var <- var_result$by_species
site_var <- var_result$by_site

# Different data format with combined datetime
var_result <- vocal_activity(df,
                                      method = "total_detections",
                                      time_col = "detection_datetime",
                                      species_col = "species")
}
}
